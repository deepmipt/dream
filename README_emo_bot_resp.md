# Программный компонент для адаптации эмоций и настроения бота в процессе диалога с пользователем

Программный компонент для адаптации эмоций и настроения бота в процессе диалога с пользователем (далее - программный компонент для адаптации эмоций и настроения бота) реализует следующие функции:
- встраивание реплики пользователя, эмоции и настроения бота, а также интенсивности выражения эмоции бота в инструкцию для большой языковой модели;
- отправка описанной выше инструкции в качестве запроса к большой языковой модели и получение от большой языковой модели ответа, который является переписанной с учётом эмоции и настроения бота гипотезой.

## Запуск
Т.к. для работы программного компонента для адаптации эмоций и настроения бота необходимо обращение к большой языковой модели, которое происходит через внешний сервис openai-api-chatgpt, при запуске программного компонента для адаптации эмоций и настроения бота необходимо также запустить сервис openai-api-chatgpt. Чтобы это сделать, необходимо запустить следующую команду:
```
docker-compose -f docker-compose.yml -f assistant_dists/dream_emotion/docker-compose.override.yml -f assistant_dists/dream_emotion/dev.yml up --build openai-api-chatgpt emotional-bot-response
```

## Тестирование
Для проведения тестов нужно установить библиотеку requests, а также добавить в файл .env_secret, который находится в корневой директории репозитория, переменную OPENAI_API_KEY, значением которой является ваш OpenAI API ключ.

Для тестирования на время работы компонента и формат входных и выходных данных необходимо запустить компонент, перейти в директорию компонента annotators/emotional_bot_response и из нее запустить следующие команды:
```
python test_time.py
```
```
python test_format.py
```
Для тестирования на время восстановления после отказа необходимо остановить Docker-контейнер с компонентом и из директории компонента annotators/emotional_bot_response запустить следующую команду:
```
bash test_launch_time.sh
```
